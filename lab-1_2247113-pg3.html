<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignupForm</title>
    <script>
      function setCookie(cname,cvalue,exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        console.log(document.cookie);
      }
      
      function getCookie(cname) {
        var name = cname + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var ca = decodedCookie.split(';');
        for(var i = 0; i < ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }
      
      function checkCookie() {
        var color = readCookie("backgroundColor");
      if (color) {
          document.body.style.backgroundColor = color;
      }
        var user=getCookie("username");
        var email=getCookie("email");
        var phone=getCookie("phone");
        console.log(document.cookie);
        
        if (user != "" && email != "" && phone != "") {
          alert("Welcome again " + user + " with email-id "+ email +"and phone number "+ phone);
          // sessionStorage.setItem("FirstName", user);
          localStorage.setItem("email", email);
          let personEmail = localStorage.getItem("email");
          document.getElementById("demo").innerHTML = personEmail;
          
          // deleteall();
      
          // document.cookie = "username=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
          // document.cookie = "email=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
          // document.cookie = "phone=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
        } else {
          
          
           user =document.forms["myForm"]["fname"].value;
           email =document.forms["myForm"]["email"].value;
           phone =document.forms["myForm"]["phno"].value;
          // document.getElementById("demo").innerHTML = personEmail;
          //  let personEmail = localStorage.getItem("email");
          //  sessionStorage.setItem("FirstName", user);
          //  localStorage.setItem("email", email);
          //  let personEmail = localStorage.getItem("email");
      
      // Retrieve
          // document.getElementById("demo").innerHTML = localStorage.getItem("email");
           
          console.log("hey"+sessionStorage);
           if (user != "" && user != null) {
             setCookie("username", user, 30);
           }
           if (email != "" && email != null) {
             setCookie("email", email, 30);
           }
           if (phone != "" && phone != null) {
             setCookie("phone", phone, 30);
           }
        }
        
      }
      function checkCookieonsubit() {
        console.log("hello00");
        deleteall();
        var color = readCookie("backgroundColor");
      if (color) {
          document.body.style.backgroundColor = color;
      }
        var user=getCookie("username");
        var email=getCookie("email");
        var phone=getCookie("phone");
        console.log(document.cookie);
        
        if (user != "" && email != "" && phone != "") {
          alert("Welcome again " + user + " with email-id "+ email +"and phone number "+ phone);
          sessionStorage.setItem("FirstName", user);
          sessionStorage.setItem("FirstName", user);
           localStorage.setItem("email", email);
           let personEmail = localStorage.getItem("email");
          // deleteall();
      
          // document.cookie = "username=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
          // document.cookie = "email=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
          // document.cookie = "phone=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
        } else {
          
          
           user =document.forms["myForm"]["fname"].value;
           email =document.forms["myForm"]["email"].value;
           phone =document.forms["myForm"]["phno"].value;
           
           sessionStorage.setItem("FirstName", user);
           sessionStorage.setItem("FirstName", user);
           localStorage.setItem("email", email);
           let personEmail = localStorage.getItem("email");
           
          console.log("hey"+sessionStorage);
           if (user != "" && user != null) {
             setCookie("username", user, 30);
           }
           if (email != "" && email != null) {
             setCookie("email", email, 30);
           }
           if (phone != "" && phone != null) {
             setCookie("phone", phone, 30);
           }
        }
        
      }
        function createCookie(name, value, days) {
          if (days) {
              var date = new Date();
              date.setTime(date.getTime()+(days*24*60*60*1000));
              var expires = "; expires="+date.toGMTString();
          }
          else var expires = "";
          document.cookie = name+"="+value+expires+"; path=/";
      }
      
      function readCookie(name) {
          var nameEQ = name + "=";
          var ca = document.cookie.split(';');
          for(var i=0;i < ca.length;i++) {
              var c = ca[i];
              while (c.charAt(0)==' ') c = c.substring(1,c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
          }
          return null;
      }
      function background(color){
          document.body.style.backgroundColor = color;
          createCookie("backgroundColor", color, 365);
      }
      function eraseCookie(name) {
          createCookie(name,"",-1);
    }
    function deleteall()
    {
      document.cookie = "username=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
      document.cookie = "email=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
      document.cookie = "phone=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
      document.cookie = "backgroundColor=; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
    }
    </script>
    
    <script type = "text/javascript">

      function validate() {
            if( document.myForm.fname.value == "" ) {

            alert( "Please provide your name!" );

            document.myForm.fname.focus() ;

            return false;

         }if (!/^[a-z A-Z]*$/g.test(document.myForm.fname.value)) {

           alert("Name should contain alphabets only.!");

          document.myForm.fname.focus();

           return false;

         }



        

         if( document.myForm.phno.value == "" || isNaN( document.myForm.phno.value ) ||

            document.myForm.phno.value.length != 10 ) {

           

            alert( "Please provide a  10 digit mobile number!" );

            document.myForm.phno.focus() ;

            return false;

         }

      }

 function validateEmail() {

    var emailID = document.myForm.email.value;

    atpos = emailID.indexOf("@");

    dotpos = emailID.lastIndexOf(".");

   

    if (atpos < 1 || ( dotpos - atpos < 2 )) {

       alert("Please enter correct email ID")

       document.myForm.email.focus() ;

       return false;

    }

    return( true );

 }

</script>
</head>
<body background="poster-6.png" onload="checkCookie();">
    <style>
        div{
            margin-top:140px;
            margin-left:580px;
            background-color:rgba(245, 237, 237, 0.955);
            height: 600px;
            width: 500px ;
        }
    </style>
    <div align="center">
        <h1><i>Signup Form</i></h1>
        <form action="" name="myForm" onsubmit="return(validate())">
            <label for="fname"><b>First Name: </b></label>
            <input type="text" id="fname" name="fname" placeholder="First Name">
            <br><br>

            <label for="lname"><b>Last Name: </b></label>
            <input type="text" id="lname" name="lname" placeholder="Last Name">
            <br><br>

            <label for="phno"><b>Phone Number: </b></label>
            <input type="text" id="phno" name="phno" placeholder="Phone Number">
            <br><br>

            <label><b>Gender: </b></label><br>
            
            <input type="radio" id="gender" name="gender" value="male">Male
            
            <input type="radio" id="gender1" name="gender" value="female">Female
            
            <input type="radio" id="gender2" name="gender" value="others">Others
            <br><br>
            <br><br>
            <label align="center"><b>Upload your ID proof: </b></label><br>
            <input type="file" id="idproof" name="idproof" accept="image/png, image/jpeg">
            <br><br>
            <label for="email"><b>Enter your email:</b></label>
            <input type="email" id="email" name="email">
            <br><br>
            <label for="username">Username:</label></b>
            <input type="text" id="username" name="username">

            <br><br>
            <label for="pass">Password (8 characters minimum):</label>
            <input type="password" id="psw" name="password" minlength="8" required>
            
            <br><br><b>How many seats do you want to book: </b><br>
            <input type="text" id="sno" name="nos">
            <br><br>

            <label><b>Choose show time:</b></label><br>
            <input type="time" id="check-in" name="check-in" required>
            <small><b>Select the show time</b></small>
            <br><br>
            <b>Booking Date:</b>
            <input type="date" id="bookingdate" name="bookingdate">
            <br><br>
            <button type="submit" name="validate" value="validate" onclick="checkCookieonsubit()" >Submit</button>
            <br><br>

        </form>
        <script>

          var myInput = document.getElementById("psw");
  
          var letter = document.getElementById("letter");
  
          var capital = document.getElementById("capital");
  
          var number = document.getElementById("number");
  
          var length = document.getElementById("length");
  
          var chart = document.getElementById("chart");
  
         
  
          
         
  
          // When the user starts to type something inside the password field
  
          myInput.onkeyup = function() {
  
            // Validate lowercase letters
  
            var lowerCaseLetters = /[a-z]/g;
  
            if(myInput.value.match(lowerCaseLetters)) {
  
              letter.classList.remove("invalid");
  
              letter.classList.add("valid");
  
            } else {
  
              letter.classList.remove("valid");
  
              letter.classList.add("invalid");
  
          }
  
         
  
            // Validate capital letters
  
            var upperCaseLetters = /[A-Z]/g;
  
            if(myInput.value.match(upperCaseLetters)) {
  
              capital.classList.remove("invalid");
  
              capital.classList.add("valid");
  
            } else {
  
              capital.classList.remove("valid");
  
              capital.classList.add("invalid");
  
            }
  
         
  
            // Validate numbers
  
            var numbers = /[0-9]/g;
  
            if(myInput.value.match(numbers)) {
  
              number.classList.remove("invalid");
  
              number.classList.add("valid");
  
            } else {
  
              number.classList.remove("valid");
  
              number.classList.add("invalid");
  
            }
  
            var chart = /[@#$%]/g;
  
            if(myInput.value.match(numbers)) {
  
              number.classList.remove("invalid");
  
              number.classList.add("valid");
  
            } else {
  
              number.classList.remove("valid");
  
              number.classList.add("invalid");
  
            }
  
            // Validate length
  
            if(myInput.value.length >= 8) {
  
              length.classList.remove("invalid");
  
              length.classList.add("valid");
  
            } else {
  
              length.classList.remove("valid");
  
              length.classList.add("invalid");
  
            }
  
          }
  
          </script>
  
    </div>
    <br><br>
    <button onclick="document.location='lab-1_2247113-pg4.html'"> Lets have fun! </button>
    <button onclick="document.location='av.html'">Trailer Viewing</button>
    <button onclick="document.location='lab-2_2247113_Canvas.html'">Canvas</button>
    <button onclick="document.location='lab-2_2247113_Geolocation.html'">Geolocation</button>
</body>
</html>